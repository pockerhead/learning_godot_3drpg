[gd_scene load_steps=7 format=3 uid="uid://b4xf04urt1g0d"]

[ext_resource type="Script" uid="uid://bgf2fgq44m5kw" path="res://Enemy/enemy.gd" id="1_epr5s"]
[ext_resource type="PackedScene" uid="uid://ditdum7ioxw8n" path="res://Player/rig.tscn" id="2_vonkd"]
[ext_resource type="PackedScene" uid="uid://lip8fcwo10sj" path="res://Player/health_component.tscn" id="3_vonkd"]
[ext_resource type="PackedScene" uid="uid://dt5so1rtl5wft" path="res://Player/area_attack.tscn" id="3_vso2s"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_vso2s"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_vonkd"]

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 9
script = ExtResource("1_epr5s")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_vso2s")

[node name="Rig" parent="." instance=ExtResource("2_vonkd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Skeleton3D" parent="Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(4.44089e-15, 0.908612, -0.0481736)
bones/2/rotation = Quaternion(0.00561946, -0.000295153, 0.00321175, 0.999979)
bones/3/rotation = Quaternion(-0.0897116, -0.000291899, 0.00852416, 0.995931)
bones/4/rotation = Quaternion(0.270984, 1.45641e-08, 9.15646e-08, 0.962584)
bones/6/rotation = Quaternion(-0.163872, -1.18003e-07, -1.70928e-08, 0.986482)
bones/7/position = Vector3(-2.53165e-08, 0.908612, -0.0481735)
bones/8/position = Vector3(-7.81225e-08, 0.908612, -0.0481735)
bones/9/position = Vector3(0.131144, 0.974816, -0.0351291)
bones/9/rotation = Quaternion(0.994102, 0.0203245, -0.0312111, 0.101858)
bones/11/rotation = Quaternion(0.398217, -0.000696099, 0.000302321, 0.917291)
bones/13/rotation = Quaternion(-0.742127, 0.0118505, 0.0243654, 0.669711)
bones/15/position = Vector3(-0.131144, 0.974816, -0.0351291)
bones/15/rotation = Quaternion(0.975492, -0.00534175, 0.0276277, 0.218228)
bones/17/rotation = Quaternion(0.424106, 0.00317246, -0.00148582, 0.905606)
bones/19/rotation = Quaternion(-0.67941, -0.0281454, -0.00135749, 0.733218)
bones/21/position = Vector3(0.0251286, 1.43823, 0.0466013)
bones/21/rotation = Quaternion(-0.473277, -0.266149, -0.414711, 0.730197)
bones/22/position = Vector3(0.191111, 1.4769, -0.0116714)
bones/22/rotation = Quaternion(0.0248049, -0.163492, 0.975401, -0.145768)
bones/23/rotation = Quaternion(3.436e-08, -0.0363036, 5.21363e-08, 0.999341)
bones/24/rotation = Quaternion(0.34521, -0.0363044, -0.0215483, 0.937575)
bones/46/position = Vector3(-0.0113635, 1.43823, 0.0466013)
bones/46/rotation = Quaternion(-0.476071, 0.25893, 0.410269, 0.733479)
bones/47/position = Vector3(-0.176185, 1.4772, -0.0146793)
bones/47/rotation = Quaternion(-0.0190559, -0.146336, 0.975927, 0.160589)
bones/48/rotation = Quaternion(-2.58207e-09, 0.0515573, -1.65867e-08, 0.99867)
bones/49/rotation = Quaternion(0.38494, 0.0515578, 0.028213, 0.921068)
bones/71/position = Vector3(0.127191, 1.35891, -0.0246967)
bones/71/rotation = Quaternion(2.01828e-08, 0.600268, 0.799799, -4.59283e-08)
bones/72/position = Vector3(-0.113426, 1.35891, -0.0246967)
bones/72/rotation = Quaternion(2.01828e-08, 0.600268, 0.799799, -4.59282e-08)

[node name="Knight_02" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_01" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="2"]
visible = true

[node name="RightHandBone" parent="Rig" index="2"]
transform = Transform3D(-0.962343, -0.270801, -0.0237147, 0.224003, -0.839404, 0.495201, -0.154007, 0.471241, 0.868455, -0.350001, 1.00861, 0.0223904)

[node name="BoneAttachment3D" parent="Rig" index="3"]
transform = Transform3D(-0.970513, 0.239108, 0.0305213, -0.210574, -0.902619, 0.375417, 0.117314, 0.35792, 0.926353, 0.347921, 0.991923, -0.0125065)

[node name="RayAttachment" parent="Rig" index="4"]
transform = Transform3D(-0.962343, -0.270801, -0.0237147, 0.224003, -0.839404, 0.495201, -0.154007, 0.471241, 0.868455, -0.350001, 1.00861, 0.0223904)

[node name="PlayerDetector" type="ShapeCast3D" parent="Rig"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_vonkd")
target_position = Vector3(0, 0, 1)
collision_mask = 4

[node name="AreaAttack" parent="Rig" instance=ExtResource("3_vso2s")]
target_position = Vector3(0, 1, 1)
collision_mask = 4

[node name="HealthComponent" parent="." instance=ExtResource("3_vonkd")]

[connection signal="heavy_attack" from="Rig" to="." method="_on_rig_heavy_attack"]
[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]

[editable path="Rig"]
[editable path="Rig/CharacterRig"]
